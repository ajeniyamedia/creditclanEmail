<app-main-navigation class="invest_active"></app-main-navigation>
<div style="width: 80%; margin: 0px auto;">
    <div class="row">
        <div class="col-md-12">
            &nbsp;
        </div>
    </div>
    <div class="row placeholder" *ngIf="loading">
        <div class="col-md-3">
            <a href="javascript:;" class="">
                <section class="panel chH sd_bt">
                    &nbsp;
                </section>
            </a>
        </div>
        <div class="col-md-3">
            <a href="javascript:;" class="">
                <section class="panel chH sd_bt">&nbsp;
                </section>
            </a>
        </div>
        <div class="col-md-3">
            <a href="javascript:;" class="">
                <section class="panel chH sd_bt">&nbsp;
                </section>
            </a>
        </div>
        <div class="col-md-3">
            <a href="javascript:;" class="">
                <section class="panel chH sd_bt">&nbsp;
                </section>
            </a>
        </div>
    </div>
    <section id="main-content">
        <div class="" style="min-height:600px">
            <div class="row" style="margin-top:120px;">
                <div class="col-md-12" style="padding:0;">
                    <div id="ajax_view">
                        <div *ngIf="!loading && !searchView">
                            <div class="row">
                                <div class="col-md-9">





                                    <div *ngIf="investments?.summary.count!='0'">

                                        <!-- New View -->
                                        <div class='loan_list' [ngClass]="{'portborder':  magic_filter.loan_status=='2', 'histborder':  magic_filter.loan_status=='3'}">
                                            <div class="panel no-margin box hover_toggle_desc" *ngFor="let disburse of investments?.loans">
                                                <div class="panel-body">
                                                    <div class="media">
                                                        <div class="pull-left thumb" style="padding-right: 20px">
                                                            <a [routerLink]="['/investment',disburse?.INVESTMENT_ID]">
                                                                <img src="http://res.cloudinary.com/africacodes-concepts-limited/image/upload/v1507561173/{{disburse.borrower.FILE_NAME | imagenotfound}}?q=auto"
                                                                    alt="{{disburse.borrower.LEGAL_NAME}}" style="width:50px; height:50px; border-radius: 50%">
                                                            </a>
                                                        </div>
                                                        <div class="pull-left" style="margin-top: 5px">
                                                            <h5 class="no-margin t_l4" style="margin-bottom: 7px">{{disburse.borrower.LEGAL_NAME}} &nbsp; | &nbsp; {{disburse.BID_PRINCIPAL
                                                                | number:'.2-2'}} &nbsp; | &nbsp; {{disburse.BID_TENOR}}
                                                                {{disburse?.LOAN_DURATION}} &nbsp; | &nbsp; {{disburse.BID_RATE}}% {{disburse?.INTEREST_DURATION}}</h5>
                                                            <!-- <p class="no-margin t_l4" style="font-size: 13px">{{disburse.LOAN_ID}}</p> -->
                                                        </div>
                                                        <div class="pull-right text-right hover_toggle">
                                                            <div class="hover_hide">
                                                                <a [routerLink]="['/investment',disburse?.REQUEST_ID]">
                                                                    <img src="http://res.cloudinary.com/africacodes-concepts-limited/image/upload/v1507561173/{{disburse.investor.FILE_NAME | imagenotfound}}?q=auto"
                                                                        alt="{{disburse.investor.LEGAL_NAME}}" style="width:31px; height:auto; border-radius: 50%">
                                                                </a>
                                                                <p class="no-margin t_lh1 t_l4" style="font-size: 14px; margin-top: 5px">{{disburse.investor.LEGAL_NAME}}</p>
                                                            </div>
                                                            <a href="javascript:;" (click)="openSec(disburse?.REQUEST_LENDER_ID)" class="pull-right hover_show">
                                                                <span class="tools pull-right" style="padding: 5px; border: 1px solid #eaeaea; border-radius: 50px;">
                                                                    <i class="fa fa-chevron-down" style="padding:5px"></i>
                                                                </span>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="panel-body" *ngIf="secOpen==disburse.REQUEST_LENDER_ID" style="border-top: 1px solid #ccc">
                                                    <div style="width:50%; margin:0px auto;margin-top:20px">
                                                        <ul class="list list_border no_pad labels">
                                                            <!-- <li>
                                                                <div class="row">
                                                                    <div class="col-md-6">Invested</div>
                                                                    <div class="col-md-6 text-right">{{disburse?.BID_PRINCIPAL}}</div>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div class="row">
                                                                    <div class="col-md-6">Repaid</div>
                                                                    <div class="col-md-6 text-right">{{disburse?.DEBIT}}</div>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div class="row">
                                                                    <div class="col-md-6">Balance</div>
                                                                    <div class="col-md-6 text-right">{{disburse?.LOAN_BALANCE}}</div>
                                                                </div>
                                                            </li> -->
                                                            <li *ngIf="disburse?.other_lenders_size>0">
                                                                <div class="row">
                                                                    <div class="col-md-6">Other Investors</div>
                                                                    <div class="col-md-6 text-right">
                                                                        <ul class="list-inline" style="display: inline-block;">
                                                                            <li *ngFor="let lender of disburse?.other_lenders" style="float:left; margin-right:20px; border:0px !important; padding:0px">
                                                                                <a title="{{lender.LEGAL_NAME}}">
                                                                                    <img style="width:32px;height:32px;border-radius:15px" src="http://res.cloudinary.com/africacodes-concepts-limited/image/upload/v1507561173/{{lender?.FILE_NAME | imagenotfound}}"
                                                                                        alt="">
                                                                                </a>
                                                                            </li>
                                                                        </ul>
                                                                    </div>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div class="row">
                                                                    <div class="col-md-6"></div>
                                                                    <div class="col-md-6 col-md-offset-6">
                                                                        <a class="pull-right btn-white wd_btn btn-orange btn-block text-center" style="padding: 6px 12px;color:#fff;">View</a>
                                                                    </div>
                                                                </div>
                                                            </li>
                                                        </ul>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>







                                    <div *ngIf="investments?.summary.count=='0'">
                                        <div>

                                            <div class="panel panel-body box" style="position: relative; padding: 30px">

                                                <div style="margin-top: 100px"></div>

                                                <div class="row">
                                                    <div class="col-md-4">
                                                        <ul class="list list_border" id="no-padding-right">
                                                            <li>
                                                                <p class="txt t_l2 t_cool">No Records</p>
                                                            </li>

                                                        </ul>
                                                    </div>
                                                    <div class="col-md-8"></div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">


                                    <!-- Front View of Side bar -->
                                    <div *ngIf="!miniSearch">

                                        <!-- status -->
                                        <div class="panel-body text-center b_grey crd_theme" [ngClass]="{'blueb':  magic_filter.loan_status=='2', 'brownb':  magic_filter.loan_status=='3'}">
                                            <div class="text-center crd_top">
                                                <p class="txt t_l2 t_lh1">{{investments?.summary.principal|money}}</p>
                                                <p class="txt">{{investments?.summary.status}}</p>
                                            </div>
                                            <a class="btn btn-white btn-full egded-box wd_btn" style="display: inline">Back</a>
                                        </div>


                                        <!-- Radio -->
                                        <div class="stacked_boxes_parent">
                                            <div *ngFor="let status of statuses; let i=index" class="stacked_boxes">
                                                <div>
                                                    <p class="txt t_l4" style="display: inline-block; width: 100%; max-width: 80%">{{status.display}}</p>
                                                    <input type="radio" (change)="getInvestments()" name="magic_filter.loan_status" [(ngModel)]="magic_filter.loan_status" [value]="status.value"
                                                        style="margin-left: 15px">
                                                </div>
                                            </div>
                                        </div>

                                        <!-- More Filter Option -->
                                        <div class="text-center txt t_l4 t_cool" style="background: #FFF; border: 1px solid #ccc;padding: 12px; border-color: #718FC8; margin-top: 5px; cursor: pointer; overflow: hidden; line-height: 34px"
                                            (click)="miniSearch=true">
                                            <button class="btn btn-default edged_box pull-left">
                                                <i class="glyphicon glyphicon-plus"></i>
                                            </button>
                                            More filter options
                                        </div>

                                        <!-- Search Input on the front -->
                                        <div style="background: #FAFAFA; border: 1px solid #ccc;padding: 12px; margin-top: 5px">
                                            <input type="text" name="" style="border: none; background: none; font-size: 16px; width: 100%; max-width: 83%;" placeholder="Search Here"
                                                [(ngModel)]="magic_filter.searchText" #searchText="ngModel" (keyup.enter)="searchForLoans()">
                                            <img src="assets/images/search.PNG" style="vertical-align: top;" (click)="searchForLoans()">
                                        </div>
                                    </div>


                                    <!-- Reverse Side -->
                                    <div *ngIf="miniSearch">
                                        <section class="panel mbot0">
                                            <div class="text-center txt t_l4 t_cool box" style="background: #FFF; border: 1px solid #ccc;padding: 12px; cursor: pointer; line-height: 34px; overflow: hidden;"
                                                (click)="miniSearch=false">
                                                <button class="btn btn-default edged_box pull-left">
                                                    <i class="glyphicon glyphicon-minus"></i>
                                                </button>
                                                Less Filter Options
                                            </div>
                                        </section>

                                        <section class="panel mbot0">
                                            <div class="panel-body">
                                                <label class="control-label">{{loans?.summary.status}}</label>
                                                <div class="input-group">
                                                    <input type="text" class="form-control" name="searchText" required [(ngModel)]="magic_filter.searchText" #searchText="ngModel">
                                                    <span class="input-group-btn">
                                                        <button [disabled]="loading" (click)="searchForLoans()" class="btn btn-white" type="button">Search !</button>
                                                    </span>
                                                </div>
                                            </div>
                                        </section>
                                        <section class="panel mbot0">
                                            <div class="panel-body">
                                                <ion-range-slider #advancedSliderElement type="double" min="10000" max="10000000" from="10000" from_min="10000" from_max="400000"
                                                    from_shadow="true" to="500000" to_min="500000" to_max="10000000" to_shadow="true"
                                                    grid="true" grid_num="10" prefix="" postfix="" decorate_both="false" (onUpdate)="update(advancedSlider, $event)"
                                                    (onChange)="update(advancedSlider, $event)" (onFinish)="finish(advancedSlider, $event)"></ion-range-slider>
                                            </div>
                                        </section>
                                        <section class="panel mbot0">
                                            <div class="panel-body">
                                                <h4>Tenor(months)</h4>
                                                <div class="row">
                                                    <div class="col-md-6" style="padding-right:5px !important" *ngFor="let duration of durations;let i = index">
                                                        <div class="form-group" style="margin-bottom:0px">
                                                            <span class="pull-left text-primary">{{duration.display}}</span>
                                                            <span class="pull-right">
                                                                <div class="checkbox" style="margin:0px !important">
                                                                    <label>
                                                                        <input type="checkbox" name="duration_{{duration.value}}" (change)="checkLevel(duration,$event.target.checked,i)">
                                                                    </label>
                                                                </div>
                                                            </span>
                                                            <div class="clearfix"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </section>





                                        <section class="panel mbot0">
                                            <div class="panel-body">
                                                <h4>Funding Status</h4>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group" style="margin-bottom:0px">
                                                            <span class="pull-left text-primary">Applied</span>
                                                            <span class="pull-right">
                                                                <div class="checkbox" style="margin:0px !important">
                                                                    <label>
                                                                        <input type="checkbox" name="funding_status_applied" [(ngModel)]="magic_filter.funding_status_applied">
                                                                    </label>
                                                                </div>
                                                            </span>
                                                            <div class="clearfix"></div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group" style="margin-bottom:0px">
                                                            <span class="pull-left text-primary">Funded</span>
                                                            <span class="pull-right">
                                                                <div class="checkbox" style="margin:0px !important">
                                                                    <label>
                                                                        <input type="checkbox" name="funding_status_funded" [(ngModel)]="magic_filter.funding_status_funded">
                                                                    </label>
                                                                </div>
                                                            </span>
                                                            <div class="clearfix"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group" style="margin-bottom:0px">
                                                            <span class="pull-left text-primary">Contract</span>
                                                            <span class="pull-right">
                                                                <div class="checkbox" style="margin:0px !important">
                                                                    <label>
                                                                        <input type="checkbox" name="funding_status_contract_created" [(ngModel)]="magic_filter.funding_status_contract_created">
                                                                    </label>
                                                                </div>
                                                            </span>
                                                            <div class="clearfix"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <footer class="panel-footer" style="background: #fff !important;">
                                                <button (click)="getInvestments()" class="btn btn-white btn-block">Apply Filter</button>
                                            </footer>
                                        </section>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>