<section class="panel">
    <header class="panel-heading" style="overflow:auto">
        Direct Debit Mandate
        <span *ngIf="view=='details'" class="tools pull-right">
            <button (click)="showMandates()" class="btn btn-white"><span *ngIf="!checking_instructions">Show Mandates</span> <i class="fa fa-spinner fa-spin" *ngIf="checking_instructions"></i></button>
        </span>
    </header>
    <div *ngIf="view=='master'">
        <app-loanaccts (showDirectDebitHistoryOnAccount)="showDirectDebitHistoryOnAccount($event)" [fromloan]=true [parentRouteId]="parentRouteId"></app-loanaccts>
    </div>
    <div *ngIf="view=='details'">

        <div *ngIf="!records_found && !checking_instructions" class="panel-body">
            <div class="animated">
                <div class="text-center" style="min-height:304px; padding-top:70px">
                    <a href="javascript:;" style="font-size:40px"><i class="fa fa-meh-o"></i></a>
                    <h3>No records found</h3>
                </div>
            </div>
        </div>
        <div *ngIf="records_found && !checking_instructions">
            <div class="panel-body">
                <div class="row invoice-list">

                    <div class="col-lg-4 col-sm-4">
                        <h4>CLIENT INFO</h4>
                        <p>Client : {{loan?.LEGAL_NAME}}</p>
                    </div>
                    <div class="col-lg-4 col-sm-4">
                        <h4>Direct Debit Info</h4>
                        <p>Request Id : {{accountfordirectdebit?.DIRECT_DEBIT_REQUEST?.DD_REQUEST_ID}}</p>
                        <p>Mandate Id : {{accountfordirectdebit?.DIRECT_DEBIT_REQUEST?.DD_MANDATE_ID}}</p>
                        <p>Status : {{accountfordirectdebit?.DIRECT_DEBIT_REQUEST?.IS_ACTIVE == '1' ? 'Active':'Not Active'}}</p>
                    </div>
                    <div class="col-lg-4 col-sm-4">
                        <h4>Direct Debit Info</h4>
                        <p>Registeration Date : {{accountfordirectdebit?.DIRECT_DEBIT_REQUEST?.ACTIVATION_RESPONSE?.registrationDate}}</p>
                        <p>Activation Date : {{accountfordirectdebit?.DIRECT_DEBIT_REQUEST?.ACTIVATION_RESPONSE?.activationDate}}</p>
                        <p>Start Date : {{accountfordirectdebit?.DIRECT_DEBIT_REQUEST?.ACTIVATION_RESPONSE?.startDate}}</p>
                        <p>End Date : {{accountfordirectdebit?.DIRECT_DEBIT_REQUEST?.ACTIVATION_RESPONSE?.endDate}}</p>
                    </div>
                </div>

            </div>
            <table class="table table-striped">
                <thead>
                    <!-- <th>#</th> -->
                    <th>Amount</th>
                    <th>Last Status Update</th>
                    <th>Status</th>
                    <th>RRR</th>
                    <th>Transaction Reference</th>

                </thead>
                <tbody>
                    <tr *ngFor="let trans of history">
                        <td>{{trans?.amount| number:'.2-2'}}</td>
                        <td>{{trans?.lastStatusUpdateTime| amDateFormat:'DD MMM YYYY'}}</td>
                        <td>{{trans?.status}}</td>
                        <td>{{trans?.RRR}}</td>
                        <td>{{trans?.transactionRef}}</td>

                    </tr>

                </tbody>

            </table>
        </div>
    </div>
</section>