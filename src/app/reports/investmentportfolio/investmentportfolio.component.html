<!-- New View -->
<div class="container-fluid" style="margin-top:120px;">
    <div class="row">
        <div class="col-md-2 hide" style="padding-right: 0">
            <div class="panel panel-default box filter_option">
                <div class="panel-heading">Investment Officer</div>
                <ul class="list-group radio_list">
                    <li class="list-group-item">
                        <label>
                            <input type="checkbox" /> <span>New</span></label>
                    </li>
                    <li class="list-group-item">
                        <label>
                            <input type="checkbox" /> <span>Roll Over</span></label>
                    </li>
                    <li class="list-group-item">
                        <label>
                            <input type="checkbox" /> <span>Both</span></label>
                    </li>
                </ul>
            </div>

            <div class="panel panel-default box filter_option">
                <div class="panel-heading">Investment Product</div>
                <div class="panel-body">
                    <select class="form-control edged_box" name="TPINV_PRO" [(ngModel)]="filter.TPINV_PRO" id="">
                        <option value="0">select</option>
                        <option *ngFor="let product of investment_products" [ngValue]="product">
                            {{product?.INVESTMENT_TITLE}}
                        </option>
                    </select>
                </div>
            </div>

            <div class="panel panel-default box filter_option">
                <div class="panel-heading">Investment Category</div>
                <div class="panel-body">
                    <select class="form-control edged_box" name="TPINV_CAT" [(ngModel)]="filter.TPINV_CAT">
                        <option [value]="0">select</option>
                        <option [value]="2">Tenored</option>
                        <option [value]="3">Call</option>
                    </select>
                </div>             
            </div>

            <div class="panel panel-default box filter_option">
                <div class="panel-heading">Investment Sub-Category</div>
                <div class="panel-body">
                    <select class="form-control edged_box" [(ngModel)]="filter.TPINV_SUBCAT" name="TPINV_SUBCAT">
                        <option [value]="0">select</option>
                        <option [value]="1">Retail</option>
                        <option [value]="2">Commercial</option>
                        <option [value]="9">CP</option>
                        <option [value]="3">Funds Management</option>
                    </select>
                </div>                
            </div>

            <div class="panel panel-default box filter_option">
                <div class="panel-heading">Entity</div>
                <div class="panel-body">
                    <select class="form-control edged_box" [(ngModel)]="filter.TP_ENTITY" name="TP_ENTITY">
                        <option [value]="0">select</option>
                        <option [value]="493">Non Corporate</option>
                        <option [value]="494">Corporate</option>
                    </select>
                </div>            
            </div>

            <div class="panel panel-default box filter_option">
                <div class="panel-heading">Customers</div>
                <div class="panel-body">
                    <ng-select [allowClear]="true" [items]="people_customers" (data)="refreshValue($event)" (selected)="selected($event)" (removed)="removed($event)" (typed)="typed($event)">
                    </ng-select>
                </div>
            </div>
        </div>

        <!-- Heading -->
        <div class="col-md-12">
            <div class="panel panel-default box">
                <div class="panel-heading" style="background: rgba(240,240,240,.5);">
                    <span style="line-height: 2.2em">Treasury Portfolio</span>
                    <div class="form-inline pull-right">
                        <select class="form-control edged_box" name="IS_ACTIVE" [(ngModel)]="filter.IS_ACTIVE">
                            <option [value]="2">All</option>
                            <option [value]="1">Active</option>
                            <option [value]="3">Liquidated</option>
                        </select>
                        <div class="input-group">
                            <input type="text" name="TPDATE" class="form-control" [(ngModel)]="filter.TPDATE" ngui-datetime-picker date-only="true" />
                            <span class="input-group-addon">To</span>
                            <input type="text" name="TPDATE_" class="form-control" [(ngModel)]="filter.TPDATE_" ngui-datetime-picker date-only="true" />
                        </div>
                        <button (click)="getInvestmentPortfolio()" class="btn btn-primary btn-tp edged_box">Submit</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Filter -->
        <div class="col-md-12">
            <div class="panel panel-default box">
                <div class="panel-heading" style="background: rgba(240,240,240,.5);">
                    <span>Filter</span>
                    <small class="pull-right" (click)="showFilter=!showFilter"><strong>></strong></small>
                </div>
                <div class="panel-body" *ngIf="showFilter">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group fi fi1 ">
                                    <label class="control-label">Investment Officer :</label>
                                    <select class="form-control" name="TPINV_OFF" [(ngModel)]="filter.TPINV_OFF">
                                        <option value="0">select</option>
                                        <option *ngFor="let off of acc_off" [ngValue]="off">
                                            {{off?.LEGAL_NAME}}
                                        </option>
                                    </select>
                                </div>
                                <div class="form-group fi fi2">
                                    <label class="control-label">Investment Product :</label>
                                    <select class="form-control" name="TPINV_PRO" [(ngModel)]="filter.TPINV_PRO" id="">
                                        <option value="0">select</option>
                                        <option *ngFor="let product of investment_products" [ngValue]="product">
                                            {{product?.INVESTMENT_TITLE}}
                                        </option>
                                    </select>
                                </div>
                            </div>                        
                            <div class="col-md-4">
                                <div class="form-group fi fi3 ">
                                    <label class="control-label">Investment Category :</label>
                                    <select class="form-control" name="TPINV_CAT" [(ngModel)]="filter.TPINV_CAT">
                                        <option [value]="0">select</option>
                                        <option [value]="2">Tenored</option>
                                        <option [value]="3">Call</option>
                                    </select>
                                </div>
                                <div class="form-group fi fi4 ">
                                    <label class="control-label">Investment Subcategory :</label>
                                    <select class="form-control" [(ngModel)]="filter.TPINV_SUBCAT" name="TPINV_SUBCAT">
                                        <option [value]="0">select</option>
                                        <option [value]="1">Retail</option>
                                        <option [value]="2">Commercial</option>
                                        <option [value]="9">CP</option>
                                        <option [value]="3">Funds Management</option>
                                    </select>
                                </div>
                            </div>                           
                            <div class="col-md-4">
                                <div class="form-group fi fi4 ">
                                    <label class="control-label">Entity :</label>
                                    <select class="form-control" [(ngModel)]="filter.TP_ENTITY" name="TP_ENTITY">
                                        <option [value]="0">select</option>
                                        <option [value]="493">Non Corporate</option>
                                        <option [value]="494">Corporate</option>
                                    </select>
                                </div>
                                <div class="form-group fi fi7 ">
                                    <label class="control-label">Customer:</label>                                    
                                    <ng-select [allowClear]="true" [items]="people_customers" (data)="refreshValue($event)" (selected)="selected($event)" (removed)="removed($event)" (typed)="typed($event)">
                                    </ng-select>
                                </div>
                            </div>
                        </div>                        
                    </div>
            </div>
        </div>

        <div class="col-md-12">
            <div class="panel panel-default box">
                <div class="panel-heading hover_toggle" style="position: relative;background: rgba(240,240,240,.5);">
                    <span class="btn btn-small btn-primary" (click)="exportReport()">Export</span>
                    <small class="pull-right"><strong>Select Fields</strong></small>
                    <div class="pull-right text-left hover_show" style="position: absolute; right: 0; text-align: left; top: 3px">
                        <div class="panel panel-default box field_list">
                            <ul class="list-group radio_list" *ngFor="let column of objectKeys(columns)">
                                <li class="list-group-item">
                                    <label>
                                        <input type="checkbox" [(ngModel)]="columns[column]" /> <span>{{column}}</span>
                                    </label>
                                </li>                                
                            </ul>     
                        </div>
                    </div>
                </div>
                <div class="panel-body">
                    <div>
                        <table class="table table-striped table-bordered table_bold_title">
                            <thead>
                                <tr>
                                    <ng-container *ngFor="let column of objectKeys(columns)">
                                        <th *ngIf="columns[column]">{{column}}</th>
                                    </ng-container>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let acc of data?.expenses.a; let i = index">
                                    <!-- <td>{{acc.REQUEST_ID}}</td>
                            <td>{{acc.ACCOUNT_NUMBER}}</td>   -->
                                    <td>{{acc.LEGAL_NAME}}</td>
                                    <td>{{acc.BID_PRINCIPAL|number:'.2-2'}}</td>
                                    <td>{{acc.INVESTMENT_CATEGORY_ID=='3'?'Call':acc.BID_TENOR}}</td>
                                    <td>{{acc.BID_RATE|number:'.2-2'}}%</td>
                                    <td>{{acc.FUNDS_RECEIVED_DATE}}</td>
                                    <td>{{acc.f}}</td>
                                    <td>{{acc.ROLLTYPE}}</td>
                                    <td>{{acc.a|number:'.2-2'}}</td>
                                    <td>{{acc.b|number:'.2-2'}}</td>
                                    <td>{{acc.c|number:'.2-2'}}</td>
                                    <!-- <td>{{acc.UPFRONTED_INTERESTS|number:'.2-2'}}</td>  -->
                                    <td>{{acc.d|number:'.2-2'}}</td>
                                    <td>{{acc.e|number:'.2-2'}}%</td>
                                    <!-- <td>{{acc.OFFICER}}</td>
                              <td>{{acc.INVESTMENT_TITLE}}</td> 
                               <td>{{acc.ROLLOVER_COUNT}}</td>   
                               <td>{{acc.CUSTOMER_TYPE=="1"?"Non Corporate":"Corporate"}}</td> -->
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Old View -->
<section id="main-content" class="hide">
    <div class="container" style="min-height: 600px;width: 100%!important;padding: 0 !important;">
        <div class="row" style="margin-top:101px;">
            <div class="col-md-12">
                <section class="panel">
                    <header class="panel-heading" style="padding:0px">
                        <div class="row" style="padding:7.5px">
                            <div class="col-md-3">Treasury Profile </div>
                            <div class="col-md-3">
                                <select class="form-control" name="IS_ACTIVE" [(ngModel)]="filter.IS_ACTIVE">
                                    <option [value]="2">All</option>
                                    <option [value]="1">Active</option>
                                    <option [value]="3">Liquidated</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <div class="input-group">
                                    <input type="text" name="TPDATE" class="form-control" [(ngModel)]="filter.TPDATE" ngui-datetime-picker date-only="true" />
                                    <span class="input-group-addon">To</span>
                                    <input type="text" name="TPDATE_" class="form-control" [(ngModel)]="filter.TPDATE_" ngui-datetime-picker date-only="true" />
                                </div>
                            </div>
                            <div class="col-md-1">
                                <button (click)="getInvestmentPortfolio()" class="btn btn-xs btn-white btn-tp">Submit</button>
                            </div>
                            <div class="col-md-1">
                                <button (click)="showFilter=!showFilter" class="btn btn-xs btn-white"><i class="fa fa-filter"></i>FIlter</button>
                            </div>
                        </div>
                    </header>
                    <header class="panel-heading" style="overflow:auto" *ngIf="data?.expenses.b.COUNTAB<20 && showFilter">
                        Count : {{data?.expenses.b.COUNTAB}}
                        <span class="tools pull-right">
              <a class="btn btn-white btn-xs printResult">
                <i class="fa fa-file-excel-o"></i>
              </a>
            </span>
                    </header>
                    <header class="panel-heading" style="overflow:auto" *ngIf="data?.expenses.b.COUNTAB>20 && showFilter">
                        Count : {{data?.expenses.b.COUNTAB}} ({{data?.from}}-{{data?.to}})
                        <span class="tools pull-right">
              <a class="btn btn-white btn-xs printResult" data-type="1">
                <i class="fa fa-file-excel-o"></i>
              </a>
              <a (click)="filter.NEXT='0';getInvestmentPortfolio()" class="btn btn-white btn-xs" *ngIf="data?.index!='1'">Prev</a>
              <a (click)="filter.NEXT='1';getInvestmentPortfolio()" class="btn btn-white btn-xs" *ngIf="data?.next<data?.expenses.b.COUNTAB">Next</a>
            </span>
                    </header>

                    <div class="panel-body" *ngIf="showFilter">
                        <div class="row">
                            <div class="col-md-2">
                                <div class="form-group fi fi1 ">
                                    <label class="control-label">Investment Officer :</label>
                                    <select class="form-control" name="TPINV_OFF" [(ngModel)]="filter.TPINV_OFF">
                                        <option value="0">select</option>
                                        <option *ngFor="let off of acc_off" [ngValue]="off">
                                            {{off?.LEGAL_NAME}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="form-group fi fi2">
                                    <label class="control-label">Investment Product :</label>
                                    <select class="form-control" name="TPINV_PRO" [(ngModel)]="filter.TPINV_PRO" id="">
                                        <option value="0">select</option>
                                        <option *ngFor="let product of investment_products" [ngValue]="product">
                                            {{product?.INVESTMENT_TITLE}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="form-group fi fi3 ">
                                    <label class="control-label">Investment Category :</label>
                                    <select class="form-control" name="TPINV_CAT" [(ngModel)]="filter.TPINV_CAT">
                                        <option [value]="0">select</option>
                                        <option [value]="2">Tenored</option>
                                        <option [value]="3">Call</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group fi fi4 ">
                                    <label class="control-label">Investment Subcategory :</label>
                                    <select class="form-control" [(ngModel)]="filter.TPINV_SUBCAT" name="TPINV_SUBCAT">
                                        <option [value]="0">select</option>
                                        <option [value]="1">Retail</option>
                                        <option [value]="2">Commercial</option>
                                        <option [value]="9">CP</option>
                                        <option [value]="3">Funds Management</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group fi fi4 ">
                                    <label class="control-label">Entity :</label>
                                    <select class="form-control" [(ngModel)]="filter.TP_ENTITY" name="TP_ENTITY">
                                        <option [value]="0">select</option>
                                        <option [value]="493">Non Corporate</option>
                                        <option [value]="494">Corporate</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group fi fi7 ">
                                    <label class="control-label">Customer:</label>
                                    <!-- <select class="form-control" [ngModel]="filter.TP_BORROWER_ID_INV" name="TP_BORROWER_ID_INV">
                    <option value="0">select</option>
                    <option *ngFor="let people of people_customers" [ngValue]="people">
                        {{people?.LEGAL_NAME}}
                      </option> 
                  </select> -->
                                    <ng-select [allowClear]="true" [items]="people_customers" (data)="refreshValue($event)" (selected)="selected($event)" (removed)="removed($event)" (typed)="typed($event)">
                                    </ng-select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="panel-body">
                        <div class="row invoice-list" style="margin-bottom:0px">
                            <!-- <div class="col-lg-4 col-sm-4">
                                  &nbsp;
                                  </div>
                                  <div class="col-lg-4 col-sm-4">
                                  &nbsp;
                                  </div> -->
                            <div class="col-lg-12 col-sm-12">
                                <h4>SUMMARY</h4>
                                <ul class="unstyled">
                                    <li>Total Principal : <strong>{{data?.expenses.summary.TOTAL_PRINCIPAL|number:'.2-2'}}</strong></li>
                                    <li>Total Interest Due : {{data?.expenses.summary.TOTAL_PRINCIPAL|number:'.2-2'}}</li>
                                    <li>Total Upfronted Interests : {{data?.expenses.summary.UPFRONTED_INTERESTS|number:'.2-2'}}</li>
                                    <li>Total WHT : {{data?.expenses.summary.TOTAL_WHT|number:'.2-2'}}</li>
                                    <li>Total Maturity Value : {{data?.expenses.summary.TOTAL_MAT|number:'.2-2'}}</li>
                                    <li>Total Accrued Interests Payable : {{data?.expenses.summary.ACCRUED_INT_PAY|number:'.2-2'}}</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div>
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <!-- <th>#</th>
                    <th>Acc Num</th> -->
                                    <th>Investor</th>
                                    <th>Amount</th>
                                    <th>Tenor</th>
                                    <th>Rate</th>
                                    <th>Date</th>
                                    <th>Maturity</th>
                                    <th>TTM</th>
                                    <!--<th>Lien Sum</th>-->
                                    <th>Interest Due</th>
                                    <th>WHT</th>
                                    <th>Maturity Value</th>
                                    <!-- <th>Upfronted Interest Paid</th> -->
                                    <th>Accrued Interest Payable</th>
                                    <th>Concentration</th>
                                    <!-- <th>Manager</th>
                    <th>Product</th> 
                    <th>Rollover Count</th>
                    <th>Entity</th>  -->
                                    <!--<th>Sector</th>
                    <th>Cert No</th> -->
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let acc of data?.expenses.a; let i = index">
                                    <!-- <td>{{acc.REQUEST_ID}}</td>
                            <td>{{acc.ACCOUNT_NUMBER}}</td>   -->
                                    <td>{{acc.LEGAL_NAME}}</td>
                                    <td>{{acc.BID_PRINCIPAL|number:'.2-2'}}</td>
                                    <td>{{acc.INVESTMENT_CATEGORY_ID=='3'?'Call':acc.BID_TENOR}}</td>
                                    <td>{{acc.BID_RATE|number:'.2-2'}}%</td>
                                    <td>{{acc.FUNDS_RECEIVED_DATE}}</td>
                                    <td>{{acc.f}}</td>
                                    <td>{{acc.ROLLTYPE}}</td>
                                    <td>{{acc.a|number:'.2-2'}}</td>
                                    <td>{{acc.b|number:'.2-2'}}</td>
                                    <td>{{acc.c|number:'.2-2'}}</td>
                                    <!-- <td>{{acc.UPFRONTED_INTERESTS|number:'.2-2'}}</td>  -->
                                    <td>{{acc.d|number:'.2-2'}}</td>
                                    <td>{{acc.e|number:'.2-2'}}%</td>
                                    <!-- <td>{{acc.OFFICER}}</td>
                              <td>{{acc.INVESTMENT_TITLE}}</td> 
                               <td>{{acc.ROLLOVER_COUNT}}</td>   
                               <td>{{acc.CUSTOMER_TYPE=="1"?"Non Corporate":"Corporate"}}</td> -->
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
            </div>
        </div>
    </div>
</section>
